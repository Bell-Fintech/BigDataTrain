package zd.dao;

import java.sql.SQLException;

import org.apache.commons.dbutils.QueryRunner;
import org.apache.commons.dbutils.handlers.BeanHandler;

import com.mchange.v2.c3p0.ComboPooledDataSource;

import zd.bean.User;

public class userDaoImpl implements userDao{

	@Override
	public int register(User user) {
		//操作数据库
				//1  要有jar  配置文件
				//2 创建数据库连接池的对象
				ComboPooledDataSource dataSource = new ComboPooledDataSource();
				//3使用阿帕奇的工具类
				QueryRunner runner = new QueryRunner(dataSource);
			    //写sql
				String sql ="select into  user where username=? and password=?" ;
				try {
					User user = runner.query(sql, new BeanHandler<User>(User.class), name,pwd);
					if(null!=user){//登录成功
						request.getRequestDispatcher("/success.html").forward(request, response);
					}else{//登录失败
						request.getRequestDispatcher("/login.html").forward(request, response);
					}
				} catch (SQLException e) {
					// TODO Auto-generated catch block
					e.printStackTrace();
				}		return 0;
	}
	
}
